<%= form_for [:account, post] do |f| %>
<%= f.label :title %>
<%= f.text_field :title %>
<%= f.label :body %>
<%= f.text_area :body, :style => 'height: 160px;' %>
<div class="row">
  <div class="small-4 columns">
    <%= f.label :category %>
    <p><a href="#" data-dropdown="choose_post_categories" class="button small secondary">Choose...</a></p>
    <ul id="choose_post_categories" class="f-dropdown" data-dropdown-content>
      <li><a href="#">New Category</a></li>
      <% current_user.categories.each do |category| %>
        <% if params[:action] == 'edit' && post.categories.include?(category) %>
        <li class="post_category category_selected" data-category-id="<%= category.id %>" data-category-selected="true"><a href="#"><%= category.name %></a></li>
        <% else %>
        <li class="post_category" data-category-id="<%= category.id %>" data-category-selected="false"><a href="#"><%= category.name %></a></li>
        <% end  %>
      <% end %>
    </ul>
  </div>
  <div class="small-8 columns">
    <ul id="new_post_categories" class="disc">
      <% if params[:action] == 'edit' %>
        <% post.categories.each do |category| %>
          <li id="post_category_<%= category.id %>"><%= category.name %></li>
        <% end %>
      <% end  %>
    </ul>
  </div>
  <div class="small-12 columns">
    <%= f.submit class: 'button success' %>
    <% if params[:action] == 'edit' %>
    <%= hidden_field_tag 'post[category_ids]', "0,#{post.categories.map(&:id).join(',')}" %>
    <% else %>
    <%= hidden_field_tag 'post[category_ids]', "0" %>
    <% end %>
  </div>
</div>
<% end %>
